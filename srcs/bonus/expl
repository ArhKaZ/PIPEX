
infile > cmd cmd cmd cmd > outfile

dup2 infile stdin

fd[2]
    parent
        dup2fd[0] stdin
        wait
    child
        dup2[fd[1] stdout
        exec

heredoc cmd cmd cmd outfile

dup2infile stdin